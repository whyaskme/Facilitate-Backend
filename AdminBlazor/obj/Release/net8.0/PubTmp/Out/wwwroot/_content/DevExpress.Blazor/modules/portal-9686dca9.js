import{_ as e}from"./_tslib-6e8ca86b.js";import{D as t}from"./data-qa-utils-8be7c726.js";import{d as n}from"./constants-058ebb50.js";import{s}from"./lit-element-70cf14f4.js";import{e as o}from"./property-d3853089.js";import{e as r}from"./custom-element-267f9a21.js";const a=new class{_doWithElementCheck(e){const t=document.querySelector(n);return e(null!=t?t:this._createPopupElement())}_createPopupElement(){const e=document.createElement(n);return document.body.appendChild(e),e}constructor(){this._rootElementPromise=customElements.whenDefined(n)}assign(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.assign(e)))))}getPopup(e){return this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.getPopup(e)))))}release(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.release(e)))))}};function i(){return a}const l="dxbl-portal";class d{constructor(e){this.elements=e}}class c extends CustomEvent{constructor(e){super(c.eventName,{detail:e,bubbles:!0})}}c.eventName="dxbl-portable-elements-changed";let h=class extends s{constructor(){super(...arguments),this._portable=null,this._elementsPorted=!1,this.slotChangedHandler=this.handleSlotChange.bind(this),this._reassignPortal=()=>i().assign(this)}get portable(){return this._portable}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");return e.appendChild(t),t.addEventListener("slotchange",this.slotChangedHandler),e}handleSlotChange(e){const t=e.target.assignedNodes();this._elementsPorted&&0===t.length||(this.assignElements(t),this._elementsPorted=!0)}assignElements(e){this._portable=e,this.raiseElementsChanged(e)}connectedCallback(){var e;super.connectedCallback(),t.setLoaded(this),i().assign(this),(null===(e=window.Blazor)||void 0===e?void 0:e.addEventListener)&&window.Blazor.addEventListener("enhancedload",this._reassignPortal)}disconnectedCallback(){var e;super.disconnectedCallback(),i().release(this),t.removeLoaded(this),(null===(e=window.Blazor)||void 0===e?void 0:e.removeEventListener)&&window.Blazor.removeEventListener("enhancedload",this._reassignPortal)}raiseElementsChanged(e){const t=new c(new d(e));this.dispatchEvent(t)}updated(e){if(!this.branchId)throw new Error("branch-id must be specified")}};function m(){}e([o({type:String,attribute:"branch-id"})],h.prototype,"branchId",void 0),h=e([r(l)],h);const u=Object.freeze({__proto__:null,dxPortalTagName:l,PortableElementsChangedEvent:c,get DxPortal(){return h},init:m,default:{init:m,DxPortal:h,dxPortalTagName:l}});export{h as D,c as P,i as g,u as p};
